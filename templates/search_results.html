{% extends 'base.html' %}
{% block content %}
<div class="search-results-layout">
    <div class="recipe-cards">
        <div class="row card-row">
            {% for matching_recipe in matching_recipes %}
            <div class="col-sm-12 col-md-6 col-lg-3">
                <div class="card">
                {% if matching_recipe.image %}
                    <img src="{{ matching_recipe.image }}" class="card-img-top"></img>
                {% else %}
                    <img src="{{ url_for('static', filename='img/art-artificial-background-1061581.jpg') }}" class="card-img-top"></img>
                {% endif %}
                    <div class="card-body">
                        <h5 class="card-title"><strong>{{matching_recipe.title.title()}}</strong></h5>
                        <hr>
                        <div class="card-text">
                            <p>
                            {% if matching_recipe.like_count %} Likes: {{matching_recipe.like_count}}  {% endif %}
                            {% if matching_recipe.like_count == null %} Likes: 0  {% endif %}
                            <hr>
                            Time: {{matching_recipe.prep_time}}<br>
                            Serves: {{matching_recipe.serves}} <br><br>
                        {% if matching_recipe.vegan %}
                            <span class="tags"><i class="fas fa-leaf"></i><em>- Vegan</em> </span>
                        {% endif %}
                        {% if matching_recipe.dairy_free %}
                            <span class="tags"><i class="fas fa-cheese"></i><em>- Dairy-free</em> </span>
                        {% endif %}
                        {% if matching_recipe.gluten_free %}
                            <span class="tags"><i class="fab fa-pagelines"></i><em>- Gluten-free </em> </span>
                        {% endif %}
                            </p>
                        </div>
                        <div class="card-btn">
                            <a href="{{ url_for('view_recipe', recipe_id=matching_recipe._id) }}" class="btn btn-primary" id="view-btn">View</a>
                            {% if the_user %}    
                                {% if matching_recipe.author == the_user.username %}
                                <a href="{{ url_for('edit_recipe', recipe_id=matching_recipe._id) }}" class="btn btn-primary">Edit</a>
                                <a href="{{ url_for('delete_recipe', recipe_id=matching_recipe._id) }}" class="btn btn-primary">Delete</a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}


